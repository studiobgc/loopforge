/**
 * Figma-Inspired Micro-Interactions
 * 
 * Patterns:
 * - Cursor context changes
 * - Hover affordances (reveal on hover)
 * - Drag feedback (ghost, drop zones)
 * - State transitions (smooth, purposeful)
 * - Selection feedback (multi-select, rubber-band)
 */

/* ═══════════════════════════════════════════════════════════════════
   1. CURSOR CONTEXTS
   ═══════════════════════════════════════════════════════════════════ */

.cursor-default { cursor: default; }
.cursor-pointer { cursor: pointer; }
.cursor-grab { cursor: grab; }
.cursor-grabbing { cursor: grabbing; }
.cursor-crosshair { cursor: crosshair; }
.cursor-text { cursor: text; }
.cursor-move { cursor: move; }
.cursor-copy { cursor: copy; }
.cursor-not-allowed { cursor: not-allowed; }
.cursor-ew-resize { cursor: ew-resize; }
.cursor-ns-resize { cursor: ns-resize; }
.cursor-nwse-resize { cursor: nwse-resize; }
.cursor-nesw-resize { cursor: nesw-resize; }
.cursor-col-resize { cursor: col-resize; }
.cursor-row-resize { cursor: row-resize; }

/* ═══════════════════════════════════════════════════════════════════
   2. BASE TRANSITIONS
   ═══════════════════════════════════════════════════════════════════ */

.transition-micro {
  transition-property: transform, opacity, box-shadow, background-color, border-color;
  transition-duration: 100ms;
  transition-timing-function: ease-out;
}

.transition-normal {
  transition-property: transform, opacity, box-shadow, background-color, border-color;
  transition-duration: 150ms;
  transition-timing-function: ease-out;
}

.transition-smooth {
  transition-property: transform, opacity, box-shadow, background-color, border-color;
  transition-duration: 200ms;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* ═══════════════════════════════════════════════════════════════════
   3. HOVER AFFORDANCES
   ═══════════════════════════════════════════════════════════════════ */

/* Hidden by default, revealed on hover */
.reveal-on-hover {
  opacity: 0;
  transition: opacity 100ms ease-out;
}

.reveal-on-hover-parent:hover .reveal-on-hover {
  opacity: 1;
}

/* Scale on hover (subtle) */
.scale-on-hover {
  transition: transform 100ms ease-out;
}

.scale-on-hover:hover {
  transform: scale(1.02);
}

/* Lift on hover (shadow) */
.lift-on-hover {
  transition: transform 150ms ease-out, box-shadow 150ms ease-out;
}

.lift-on-hover:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* Glow on hover */
.glow-on-hover {
  transition: box-shadow 100ms ease-out;
}

.glow-on-hover:hover {
  box-shadow: 0 0 0 2px var(--accent-color, #f59e0b);
}

/* Dim siblings on hover (focus) */
.dim-siblings-on-hover:hover ~ * {
  opacity: 0.5;
}

/* ═══════════════════════════════════════════════════════════════════
   4. SELECTION STATES
   ═══════════════════════════════════════════════════════════════════ */

/* Selected state */
.selected {
  box-shadow: 0 0 0 2px var(--selection-color, #3b82f6);
}

.selected-primary {
  box-shadow: 0 0 0 2px var(--selection-color, #3b82f6),
              0 0 0 4px rgba(59, 130, 246, 0.2);
}

/* Focus ring */
.focus-ring:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px var(--focus-color, #8b5cf6);
}

/* Multi-select (dashed) */
.multi-selected {
  box-shadow: 0 0 0 2px var(--selection-color, #3b82f6);
  background-image: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 2px,
    rgba(59, 130, 246, 0.1) 2px,
    rgba(59, 130, 246, 0.1) 4px
  );
}

/* Rubber band selection box */
.rubber-band {
  position: fixed;
  border: 1px solid var(--selection-color, #3b82f6);
  background-color: rgba(59, 130, 246, 0.1);
  pointer-events: none;
  z-index: 9999;
}

/* ═══════════════════════════════════════════════════════════════════
   5. DRAG FEEDBACK
   ═══════════════════════════════════════════════════════════════════ */

/* Dragging state */
.dragging {
  opacity: 0.7;
  transform: scale(1.02);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  cursor: grabbing;
  z-index: 1000;
}

/* Drag ghost (preview) */
.drag-ghost {
  position: fixed;
  pointer-events: none;
  opacity: 0.8;
  transform: rotate(2deg);
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.25);
  z-index: 9999;
}

/* Drop zone - idle */
.drop-zone {
  transition: background-color 150ms ease-out, border-color 150ms ease-out;
  border: 2px dashed transparent;
}

/* Drop zone - active (something is being dragged) */
.drop-zone-active {
  border-color: var(--drop-zone-color, #6b7280);
  background-color: rgba(107, 114, 128, 0.05);
}

/* Drop zone - valid (can drop here) */
.drop-zone-valid {
  border-color: var(--success-color, #10b981);
  background-color: rgba(16, 185, 129, 0.1);
  animation: pulse-valid 1s ease-in-out infinite;
}

@keyframes pulse-valid {
  0%, 100% { background-color: rgba(16, 185, 129, 0.1); }
  50% { background-color: rgba(16, 185, 129, 0.2); }
}

/* Drop zone - invalid */
.drop-zone-invalid {
  border-color: var(--error-color, #ef4444);
  background-color: rgba(239, 68, 68, 0.05);
  cursor: not-allowed;
}

/* ═══════════════════════════════════════════════════════════════════
   6. PLAYING / RECORDING STATES
   ═══════════════════════════════════════════════════════════════════ */

/* Playing indicator */
.playing {
  animation: playing-pulse 1s ease-in-out infinite;
}

@keyframes playing-pulse {
  0%, 100% { box-shadow: 0 0 0 2px var(--playing-color, #10b981); }
  50% { box-shadow: 0 0 8px 2px var(--playing-color, #10b981); }
}

/* Recording indicator */
.recording {
  animation: recording-pulse 0.5s ease-in-out infinite;
}

@keyframes recording-pulse {
  0%, 100% { box-shadow: 0 0 0 2px var(--recording-color, #ef4444); }
  50% { box-shadow: 0 0 12px 4px var(--recording-color, #ef4444); }
}

/* Beat flash */
.beat-flash {
  animation: beat-flash 100ms ease-out;
}

@keyframes beat-flash {
  0% { background-color: rgba(255, 255, 255, 0.3); }
  100% { background-color: transparent; }
}

/* ═══════════════════════════════════════════════════════════════════
   7. LOADING / PROCESSING STATES
   ═══════════════════════════════════════════════════════════════════ */

/* Skeleton loading */
.skeleton {
  background: linear-gradient(
    90deg,
    var(--skeleton-base, #27272a) 25%,
    var(--skeleton-highlight, #3f3f46) 50%,
    var(--skeleton-base, #27272a) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

@keyframes skeleton-shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* Processing spinner */
.processing::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 16px;
  height: 16px;
  margin: -8px 0 0 -8px;
  border: 2px solid transparent;
  border-top-color: var(--accent-color, #f59e0b);
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ═══════════════════════════════════════════════════════════════════
   8. SNAPPING / ALIGNMENT GUIDES
   ═══════════════════════════════════════════════════════════════════ */

/* Snap guide (vertical) */
.snap-guide-v {
  position: fixed;
  width: 1px;
  background-color: var(--snap-color, #f59e0b);
  pointer-events: none;
  z-index: 9998;
}

/* Snap guide (horizontal) */
.snap-guide-h {
  position: fixed;
  height: 1px;
  background-color: var(--snap-color, #f59e0b);
  pointer-events: none;
  z-index: 9998;
}

/* Snap point indicator */
.snap-point {
  position: absolute;
  width: 6px;
  height: 6px;
  margin: -3px 0 0 -3px;
  background-color: var(--snap-color, #f59e0b);
  border-radius: 50%;
  pointer-events: none;
  z-index: 9999;
}

/* ═══════════════════════════════════════════════════════════════════
   9. TOOLTIPS & HINTS
   ═══════════════════════════════════════════════════════════════════ */

/* Tooltip container */
.tooltip {
  position: relative;
}

.tooltip::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(-4px);
  padding: 4px 8px;
  background-color: var(--tooltip-bg, #18181b);
  color: var(--tooltip-color, #fafafa);
  font-size: 11px;
  white-space: nowrap;
  border-radius: 4px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 100ms ease-out, transform 100ms ease-out;
  z-index: 9999;
}

.tooltip:hover::after {
  opacity: 1;
  transform: translateX(-50%) translateY(-8px);
}

/* Keyboard shortcut badge */
.kbd {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 20px;
  height: 20px;
  padding: 0 6px;
  background-color: var(--kbd-bg, #27272a);
  border: 1px solid var(--kbd-border, #3f3f46);
  border-radius: 4px;
  font-family: ui-monospace, monospace;
  font-size: 11px;
  font-weight: 500;
  color: var(--kbd-color, #a1a1aa);
  box-shadow: 0 1px 0 var(--kbd-shadow, #18181b);
}

/* ═══════════════════════════════════════════════════════════════════
   10. WAVEFORM / AUDIO SPECIFIC
   ═══════════════════════════════════════════════════════════════════ */

/* Slice boundary */
.slice-boundary {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 2px;
  background-color: var(--slice-color, #6b7280);
  cursor: col-resize;
  transition: background-color 100ms ease-out, width 100ms ease-out;
}

.slice-boundary:hover {
  width: 4px;
  background-color: var(--slice-color-hover, #f59e0b);
}

/* Playhead */
.playhead {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 2px;
  background-color: var(--playhead-color, #ef4444);
  pointer-events: none;
  z-index: 100;
}

.playhead::before {
  content: '';
  position: absolute;
  top: -4px;
  left: -4px;
  width: 10px;
  height: 10px;
  background-color: var(--playhead-color, #ef4444);
  border-radius: 50%;
}

/* Loop region */
.loop-region {
  position: absolute;
  top: 0;
  bottom: 0;
  background-color: rgba(139, 92, 246, 0.1);
  border-left: 2px solid var(--loop-color, #8b5cf6);
  border-right: 2px solid var(--loop-color, #8b5cf6);
  pointer-events: none;
}

/* ═══════════════════════════════════════════════════════════════════
   11. PAD / GRID SPECIFIC
   ═══════════════════════════════════════════════════════════════════ */

/* Pad press animation */
.pad-press {
  animation: pad-press 150ms ease-out;
}

@keyframes pad-press {
  0% { transform: scale(1); }
  50% { transform: scale(0.95); }
  100% { transform: scale(1); }
}

/* Pad trigger flash */
.pad-trigger {
  animation: pad-trigger 100ms ease-out;
}

@keyframes pad-trigger {
  0% { 
    background-color: rgba(255, 255, 255, 0.5);
    box-shadow: 0 0 16px 4px currentColor;
  }
  100% { 
    background-color: transparent;
    box-shadow: none;
  }
}

/* Grid cell hover */
.grid-cell {
  transition: background-color 50ms ease-out;
}

.grid-cell:hover {
  background-color: rgba(255, 255, 255, 0.05);
}

/* Grid beat marker */
.grid-beat {
  border-left: 1px solid var(--grid-beat-color, #3f3f46);
}

.grid-downbeat {
  border-left: 2px solid var(--grid-downbeat-color, #52525b);
}
